<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Logtk__InnerTerm (logtk.Logtk__InnerTerm)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../index.html">logtk</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Logtk__InnerTerm</span></h1></header><h2>Inner Terms</h2><p>Those terms are not designed to be used directly, but rather to provide
a generic backend (implementing De Bruijn indices, subterms, substitutions,
etc.) for other more specific representations like <span class="xref-unresolved" title="unresolved reference to &quot;Type.t&quot;">Type.t</span> and <span class="xref-unresolved" title="unresolved reference to &quot;Term.t&quot;">Term.t</span>.</p><p>The point is that we only have to do substitution, hashconsing,
and De Bruijn indices manipulation in one place;
it also makes it easy to make terms
and types occur in one another (types as parameters to terms, etc.)</p><p>NOTE: this should be used with a lot of caution. Few checks are performed
(even typing checks) and it is easy to obtain non-closed terms
or ill-typed terms by manipulating this carelessly.</p><div class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>t</code><code></code><code><span class="keyword"> = </span><span class="keyword">private </span></code><code>{</code><table class="record"><tr id="type-t.term" class="anchored"><td class="def field"><a href="#type-t.term" class="anchor"></a><code>term : <a href="index.html#type-view">view</a>;</code></td></tr><tr id="type-t.ty" class="anchored"><td class="def field"><a href="#type-t.ty" class="anchor"></a><code>ty : <a href="index.html#type-type_result">type_result</a>;</code></td></tr><tr id="type-t.id" class="anchored"><td class="def field"><a href="#type-t.id" class="anchor"></a><code><span class="keyword">mutable </span>id : int;</code></td></tr><tr id="type-t.payload" class="anchored"><td class="def field"><a href="#type-t.payload" class="anchor"></a><code><span class="keyword">mutable </span>payload : exn;</code></td></tr></table><code>}</code><code></code></div><div class="doc"><p>Abstract type of term</p></div></div><div class="spec type" id="type-view"><a href="#type-view" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>view</code><code></code><code><span class="keyword"> = </span><span class="keyword">private </span></code><table class="variant"><tr id="type-view.Var" class="anchored"><td class="def constructor"><a href="#type-view.Var" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Var</span><span class="keyword"> of </span><a href="index.html#type-t">t</a> <a href="../Logtk/HVar/index.html#type-t">Logtk.HVar.t</a></code></td><td class="doc"><p>(** Free variable *)</p></td></tr><tr id="type-view.DB" class="anchored"><td class="def constructor"><a href="#type-view.DB" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">DB</span><span class="keyword"> of </span>int</code></td></tr><tr id="type-view.Bind" class="anchored"><td class="def constructor"><a href="#type-view.Bind" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Bind</span><span class="keyword"> of </span><a href="../Logtk/Binder/index.html#type-t">Logtk.Binder.t</a><span class="keyword"> * </span><a href="index.html#type-t">t</a><span class="keyword"> * </span><a href="index.html#type-t">t</a></code></td><td class="doc"><p>(** Type, sub-term *)</p></td></tr><tr id="type-view.Const" class="anchored"><td class="def constructor"><a href="#type-view.Const" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Const</span><span class="keyword"> of </span><a href="../Logtk/ID/index.html#type-t">Logtk.ID.t</a></code></td><td class="doc"><p>(** Constant *)</p></td></tr><tr id="type-view.App" class="anchored"><td class="def constructor"><a href="#type-view.App" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">App</span><span class="keyword"> of </span><a href="index.html#type-t">t</a><span class="keyword"> * </span><a href="index.html#type-t">t</a> list</code></td><td class="doc"><p>(** Uncurried application *)</p></td></tr><tr id="type-view.AppBuiltin" class="anchored"><td class="def constructor"><a href="#type-view.AppBuiltin" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">AppBuiltin</span><span class="keyword"> of </span><a href="../Logtk/Builtin/index.html#type-t">Logtk.Builtin.t</a><span class="keyword"> * </span><a href="index.html#type-t">t</a> list</code></td><td class="doc"><p>(** For representing special constructors *)</p></td></tr></table><code></code></div><div class="doc"></div></div><div class="spec type" id="type-type_result"><a href="#type-type_result" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>type_result</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-type_result.NoType" class="anchored"><td class="def constructor"><a href="#type-type_result.NoType" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">NoType</span></code></td></tr><tr id="type-type_result.HasType" class="anchored"><td class="def constructor"><a href="#type-type_result.HasType" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">HasType</span><span class="keyword"> of </span><a href="index.html#type-t">t</a></code></td></tr></table><code></code></div><div class="doc"></div></div><div class="spec type" id="type-term"><a href="#type-term" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>term</code><code><span class="keyword"> = </span><a href="index.html#type-t">t</a></code><code></code></div><div class="doc"></div></div><div class="spec val" id="val-view"><a href="#val-view" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>view : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-view">view</a></code></div><div class="doc"><p>View on the term's head form</p></div></div><div class="spec val" id="val-ty"><a href="#val-ty" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>ty : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-type_result">type_result</a></code></div><div class="doc"><p>Type of the term, if any</p></div></div><div class="spec val" id="val-ty_exn"><a href="#val-ty_exn" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>ty_exn : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p>Same as <a href="index.html#type-t.ty">ty</a>, but fails if the term has no type</p><ul class="at-tag"><li><span class="at-tag raise">Raises</span> <span class="module-path">Invalid_argument</span>: if the type is <code class="code">NoType</code></li></ul></div></div><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../Logtk/Interfaces/index.html#module-type-HASH">Logtk.Interfaces.HASH</a><span class="keyword"> with </span><span class="keyword">type </span><a href="../Logtk/Interfaces/module-type-HASH/index.html#type-t">t</a> := <a href="index.html#type-t">t</a></code></span></summary><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../Logtk/Interfaces/index.html#module-type-EQ">Logtk.Interfaces.EQ</a></code></span></summary><div class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>t</code><code></code><code></code></div><div class="doc"></div></div><div class="spec val" id="val-equal"><a href="#val-equal" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>equal : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"></div></div></details></div><div class="spec val" id="val-hash"><a href="#val-hash" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>hash : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"></div></div></details></div><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../Logtk/Interfaces/index.html#module-type-ORD">Logtk.Interfaces.ORD</a><span class="keyword"> with </span><span class="keyword">type </span><a href="../Logtk/Interfaces/module-type-ORD/index.html#type-t">t</a> := <a href="index.html#type-t">t</a></code></span></summary><div class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>t</code><code></code><code></code></div><div class="doc"></div></div><div class="spec val" id="val-compare"><a href="#val-compare" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>compare : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"></div></div></details></div><div class="spec val" id="val-hash_mod_alpha"><a href="#val-hash_mod_alpha" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>hash_mod_alpha : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"><p>Hash invariant w.r.t variable renaming</p></div></div><div class="spec val" id="val-same_l"><a href="#val-same_l" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>same_l : <a href="index.html#type-t">t</a> list <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> list <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"><p>Physical equality on lists of terms, roughly the same as <span class="xref-unresolved" title="unresolved reference to &quot;List.forall2 (==)&quot;">List.forall2 (==)</span></p></div></div><h4>Constructors</h4><p>Some constructors, such as record, may raise
<a href="index.html#exception-IllFormedTerm">IllFormedTerm</a>if the arguments are ill-formed (several occurrences of
a key), or, for variables, if the number is negative</p><div class="spec exception" id="exception-IllFormedTerm"><a href="#exception-IllFormedTerm" class="anchor"></a><div class="def exception"><code><span class="keyword">exception </span></code><code><span class="exception">IllFormedTerm</span><span class="keyword"> of </span>string</code></div><div class="doc"></div></div><div class="spec type" id="type-nat"><a href="#type-nat" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>nat</code><code><span class="keyword"> = </span>int</code><code></code></div><div class="doc"></div></div><div class="spec val" id="val-const"><a href="#val-const" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>const : ty:<a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="../Logtk/ID/index.html#type-t">Logtk.ID.t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"></div></div><div class="spec val" id="val-app"><a href="#val-app" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>app : ty:<a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> list <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"></div></div><div class="spec val" id="val-bind"><a href="#val-bind" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>bind : ty:<a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> varty:<a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="../Logtk/Binder/index.html#type-t">Logtk.Binder.t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"></div></div><div class="spec val" id="val-var"><a href="#val-var" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>var : <a href="index.html#type-t">t</a> <a href="../Logtk/HVar/index.html#type-t">Logtk.HVar.t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"></div></div><div class="spec val" id="val-bvar"><a href="#val-bvar" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>bvar : ty:<a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-nat">nat</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"></div></div><div class="spec val" id="val-app_builtin"><a href="#val-app_builtin" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>app_builtin : ty:<a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="../Logtk/Builtin/index.html#type-t">Logtk.Builtin.t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> list <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"></div></div><div class="spec val" id="val-builtin"><a href="#val-builtin" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>builtin : ty:<a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="../Logtk/Builtin/index.html#type-t">Logtk.Builtin.t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"></div></div><div class="spec val" id="val-tType"><a href="#val-tType" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>tType : <a href="index.html#type-t">t</a></code></div><div class="doc"><p>The root of the type system. It doesn't have a type.
It has kind <code class="code">Kind.Type</code></p></div></div><div class="spec val" id="val-arrow"><a href="#val-arrow" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>arrow : <a href="index.html#type-t">t</a> list <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p>Smart constructor for arrow types</p></div></div><div class="spec val" id="val-cast"><a href="#val-cast" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>cast : ty:<a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p>Change the type</p></div></div><div class="spec val" id="val-is_var"><a href="#val-is_var" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>is_var : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"></div></div><div class="spec val" id="val-is_bvar"><a href="#val-is_bvar" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>is_bvar : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"></div></div><div class="spec val" id="val-is_const"><a href="#val-is_const" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>is_const : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"></div></div><div class="spec val" id="val-is_bind"><a href="#val-is_bind" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>is_bind : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"></div></div><div class="spec val" id="val-is_app"><a href="#val-is_app" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>is_app : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"></div></div><div class="spec val" id="val-is_tType"><a href="#val-is_tType" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>is_tType : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"></div></div><div class="spec val" id="val-is_lambda"><a href="#val-is_lambda" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>is_lambda : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"></div></div><div class="spec val" id="val-hashcons_stats"><a href="#val-hashcons_stats" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>hashcons_stats : unit <span class="keyword">&#8209;&gt;</span> int<span class="keyword"> * </span>int<span class="keyword"> * </span>int<span class="keyword"> * </span>int<span class="keyword"> * </span>int<span class="keyword"> * </span>int</code></div><div class="doc"></div></div><h4>Payload</h4><div class="spec exception" id="exception-No_payload"><a href="#exception-No_payload" class="anchor"></a><div class="def exception"><code><span class="keyword">exception </span></code><code><span class="exception">No_payload</span></code></div><div class="doc"></div></div><div class="spec val" id="val-payload"><a href="#val-payload" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>payload : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> exn</code></div><div class="doc"></div></div><div class="spec val" id="val-set_payload"><a href="#val-set_payload" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>set_payload : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> exn <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>Set payload.</p><ul class="at-tag"><li><span class="at-tag raise">Raises</span> <span class="module-path">Invalid_argument</span>: if there is already a payload</li></ul></div></div><div class="spec val" id="val-set_payload_erase"><a href="#val-set_payload_erase" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>set_payload_erase : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> exn <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>Set payload, ignoring the previous payload.</p></div></div><h4>Containers</h4><div class="spec module" id="module-Map"><a href="#module-Map" class="anchor"></a><div class="def module"><code><span class="keyword">module </span>Map : CCMap.S<span class="keyword"> with </span><span class="keyword">type </span><a href="index.html#module-Map">Map</a>.key<span class="keyword"> = </span><a href="index.html#type-term">term</a></code></div><div class="doc"></div></div><div class="spec module" id="module-Set"><a href="#module-Set" class="anchor"></a><div class="def module"><code><span class="keyword">module </span>Set : CCSet.S<span class="keyword"> with </span><span class="keyword">type </span><a href="index.html#module-Set">Set</a>.elt<span class="keyword"> = </span><a href="index.html#type-term">term</a></code></div><div class="doc"></div></div><div class="spec module" id="module-Tbl"><a href="#module-Tbl" class="anchor"></a><div class="def module"><code><span class="keyword">module </span>Tbl : CCHashtbl.S<span class="keyword"> with </span><span class="keyword">type </span><a href="index.html#module-Tbl">Tbl</a>.key<span class="keyword"> = </span><a href="index.html#type-term">term</a></code></div><div class="doc"></div></div><div class="spec module" id="module-VarMap"><a href="#module-VarMap" class="anchor"></a><div class="def module"><code><span class="keyword">module </span>VarMap : CCMap.S<span class="keyword"> with </span><span class="keyword">type </span><a href="index.html#module-VarMap">VarMap</a>.key<span class="keyword"> = </span><a href="index.html#type-t">t</a> <a href="../Logtk/HVar/index.html#type-t">Logtk.HVar.t</a></code></div><div class="doc"></div></div><div class="spec module" id="module-VarSet"><a href="#module-VarSet" class="anchor"></a><div class="def module"><code><span class="keyword">module </span>VarSet : CCSet.S<span class="keyword"> with </span><span class="keyword">type </span><a href="index.html#module-VarSet">VarSet</a>.elt<span class="keyword"> = </span><a href="index.html#type-t">t</a> <a href="../Logtk/HVar/index.html#type-t">Logtk.HVar.t</a></code></div><div class="doc"></div></div><div class="spec module" id="module-VarTbl"><a href="#module-VarTbl" class="anchor"></a><div class="def module"><code><span class="keyword">module </span>VarTbl : CCHashtbl.S<span class="keyword"> with </span><span class="keyword">type </span><a href="index.html#module-VarTbl">VarTbl</a>.key<span class="keyword"> = </span><a href="index.html#type-t">t</a> <a href="../Logtk/HVar/index.html#type-t">Logtk.HVar.t</a></code></div><div class="doc"></div></div><h4>De Bruijn indices handling</h4><div class="spec module" id="module-DB"><a href="#module-DB" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="DB/index.html">DB</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><h4>Iterators</h4><div class="spec module" id="module-Seq"><a href="#module-Seq" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Seq/index.html">Seq</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><h4>Positions</h4><div class="spec module" id="module-Pos"><a href="#module-Pos" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Pos/index.html">Pos</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><div class="spec val" id="val-replace"><a href="#val-replace" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>replace : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> old:<a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> by:<a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">replace t ~old ~by</code> syntactically replaces all occurrences of <code class="code">old</code>
in <code class="code">t</code> by the term <code class="code">by</code>.</p></div></div><div class="spec val" id="val-replace_m"><a href="#val-replace_m" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>replace_m : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <a href="index.html#module-Map">Map</a>.t <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p>Simultaneous replacement of every <code class="code">a-&gt;b</code> in the map</p></div></div><h4>Variables</h4><div class="spec val" id="val-bind_vars"><a href="#val-bind_vars" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>bind_vars : ty:<a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="../Logtk/Binder/index.html#type-t">Logtk.Binder.t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <a href="../Logtk/HVar/index.html#type-t">Logtk.HVar.t</a> list <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">bind_vars ~ty b vars t</code> binds each <code class="code">v in vars</code> with the binder <code class="code">b</code>,
with body <code class="code">t</code>, and each intermediate result has type <code class="code">ty</code>
(not suitable for functions)</p></div></div><div class="spec val" id="val-close_vars"><a href="#val-close_vars" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>close_vars : ty:<a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="../Logtk/Binder/index.html#type-t">Logtk.Binder.t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p>Close all free variables of the term using the binding symbol</p></div></div><div class="spec val" id="val-fun_"><a href="#val-fun_" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>fun_ : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"></div></div><div class="spec val" id="val-fun_l"><a href="#val-fun_l" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>fun_l : <a href="index.html#type-t">t</a> list <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"></div></div><div class="spec val" id="val-fun_of_fvars"><a href="#val-fun_of_fvars" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>fun_of_fvars : <a href="index.html#type-t">t</a> <a href="../Logtk/HVar/index.html#type-t">Logtk.HVar.t</a> list <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p>Build a function from a list of free vars + the body.
This performs the De Bruijn transformation, and shifts the body.</p></div></div><div class="spec val" id="val-open_fun"><a href="#val-open_fun" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>open_fun : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> list<span class="keyword"> * </span><a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">open_fun ty</code> &quot;unrolls&quot; function arrows from the left, so that
<code class="code">open_fun (a -&gt; (b -&gt; (c -&gt; d)))</code> returns <code class="code">[a;b;c], d</code>.</p><ul class="at-tag"><li><span class="at-tag return">Returns</span> the return type and the list of all its arguments</li></ul></div></div><div class="spec val" id="val-open_poly_fun"><a href="#val-open_poly_fun" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>open_poly_fun : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> int<span class="keyword"> * </span><a href="index.html#type-t">t</a> list<span class="keyword"> * </span><a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">open_poly_fun ty</code> &quot;unrolls&quot; polymorphic function arrows from the left, so that
<code class="code">open_fun (forall a b. f a -&gt; (g b -&gt; (c -&gt; d)))</code> returns <code class="code">2; [f a;g b;c], d</code>.</p><ul class="at-tag"><li><span class="at-tag return">Returns</span> the return type, the number of type variables,
and the list of all its arguments</li></ul></div></div><div class="spec val" id="val-open_bind"><a href="#val-open_bind" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>open_bind : <a href="../Logtk/Binder/index.html#type-t">Logtk.Binder.t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> list<span class="keyword"> * </span><a href="index.html#type-t">t</a></code></div><div class="doc"></div></div><div class="spec val" id="val-open_bind_fresh"><a href="#val-open_bind_fresh" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>open_bind_fresh : <a href="../Logtk/Binder/index.html#type-t">Logtk.Binder.t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <a href="../Logtk/HVar/index.html#type-t">Logtk.HVar.t</a> list<span class="keyword"> * </span><a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">open_bind_fresh λ (λxy. F)</code> returns <code class="code">[v1,v2], F[v1/x,v2/y]</code>
where <code class="code">v1</code> and <code class="code">v2</code> are fresh variables using <span class="xref-unresolved" title="unresolved reference to &quot;HVar.fresh&quot;">HVar.fresh</span></p></div></div><div class="spec val" id="val-open_bind_fresh2"><a href="#val-open_bind_fresh2" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>open_bind_fresh2 : ?&#8288;eq_ty:(<a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> bool) <span class="keyword">&#8209;&gt;</span> <a href="../Logtk/Binder/index.html#type-t">Logtk.Binder.t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <a href="../Logtk/HVar/index.html#type-t">Logtk.HVar.t</a> list<span class="keyword"> * </span><a href="index.html#type-t">t</a><span class="keyword"> * </span><a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">open_bind_free2 λ (λxy. F) (λxyz. G)</code>
returns <code class="code">[v1,v2], F[v1/x,v2/y], λz.G[v1/x,v2/y]</code>
where <code class="code">v1</code> and <code class="code">v2</code> are fresh variables using <span class="xref-unresolved" title="unresolved reference to &quot;HVar.fresh&quot;">HVar.fresh</span></p><ul class="at-tag"><li><span class="at-tag parameter">Parameter</span> <span class="module-path">eq_ty</span>: checks whether type of bound variables are compatible</li></ul></div></div><div class="spec val" id="val-open_fun"><a href="#val-open_fun" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>open_fun : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> list<span class="keyword"> * </span><a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">open_fun ty</code> &quot;unrolls&quot; function arrows from the left, so that
<code class="code">open_fun (a -&gt; (b -&gt; (c -&gt; d)))</code> returns <code class="code">[a;b;c], d</code>.</p><ul class="at-tag"><li><span class="at-tag return">Returns</span> the return type and the list of all its arguments</li></ul></div></div><div class="spec val" id="val-open_poly_fun"><a href="#val-open_poly_fun" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>open_poly_fun : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> int<span class="keyword"> * </span><a href="index.html#type-t">t</a> list<span class="keyword"> * </span><a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">open_poly_fun ty</code> &quot;unrolls&quot; polymorphic function arrows from the left, so that
<code class="code">open_fun (forall a b. f a -&gt; (g b -&gt; (c -&gt; d)))</code> returns <code class="code">2; [f a;g b;c], d</code>.</p><ul class="at-tag"><li><span class="at-tag return">Returns</span> the return type, the number of type variables,
and the list of all its arguments</li></ul></div></div><div class="spec val" id="val-open_bind"><a href="#val-open_bind" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>open_bind : <a href="../Logtk/Binder/index.html#type-t">Logtk.Binder.t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> list<span class="keyword"> * </span><a href="index.html#type-t">t</a></code></div><div class="doc"></div></div><div class="spec val" id="val-open_bind2"><a href="#val-open_bind2" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>open_bind2 : <a href="../Logtk/Binder/index.html#type-t">Logtk.Binder.t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> list<span class="keyword"> * </span><a href="index.html#type-t">t</a><span class="keyword"> * </span><a href="index.html#type-t">t</a> list<span class="keyword"> * </span><a href="index.html#type-t">t</a></code></div><div class="doc"></div></div><div class="spec val" id="val-mk_fun"><a href="#val-mk_fun" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>mk_fun : ty_l:<a href="index.html#type-t">t</a> list <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">mk_fun ~ty_l body</code> closes over body for DB indices of type <code class="code">ty_l</code></p></div></div><div class="spec val" id="val-is_ground"><a href="#val-is_ground" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>is_ground : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"><p><code class="code">true</code> if the term contains no free variables</p></div></div><h4>Misc</h4><div class="spec val" id="val-size"><a href="#val-size" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>size : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"></div></div><div class="spec val" id="val-depth"><a href="#val-depth" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>depth : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"></div></div><div class="spec val" id="val-head"><a href="#val-head" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>head : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="../Logtk/ID/index.html#type-t">Logtk.ID.t</a> option</code></div><div class="doc"><p>Head symbol, or None if the term is a (bound) variable</p></div></div><div class="spec val" id="val-type_is_unifiable"><a href="#val-type_is_unifiable" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>type_is_unifiable : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"><p>Can we (syntactically) unify terms of this type?</p></div></div><div class="spec val" id="val-type_non_unifiable_tags"><a href="#val-type_non_unifiable_tags" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>type_non_unifiable_tags : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="../Logtk/Builtin/Tag/index.html#type-t">Logtk.Builtin.Tag.t</a> list</code></div><div class="doc"><p>Theory tags that justify this type not being unifiable</p></div></div><div class="spec val" id="val-type_is_prop"><a href="#val-type_is_prop" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>type_is_prop : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"><p>Is is equal to <code class="code">prop</code></p></div></div><div class="spec val" id="val-is_a_type"><a href="#val-is_a_type" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>is_a_type : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"><p>Is this a type? (i.e. its type is <a href="index.html#val-tType">tType</a>)</p></div></div><div class="spec val" id="val-as_app"><a href="#val-as_app" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>as_app : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a><span class="keyword"> * </span><a href="index.html#type-t">t</a> list</code></div><div class="doc"><p><code class="code">as_app t</code> decomposes <code class="code">t</code> into a head (non-application) and arguments,
such as <code class="code">(let f,l = as_app t in app f l) = t</code></p></div></div><div class="spec val" id="val-as_var"><a href="#val-as_var" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>as_var : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <a href="../Logtk/HVar/index.html#type-t">Logtk.HVar.t</a> option</code></div><div class="doc"></div></div><div class="spec val" id="val-as_var_exn"><a href="#val-as_var_exn" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>as_var_exn : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <a href="../Logtk/HVar/index.html#type-t">Logtk.HVar.t</a></code></div><div class="doc"></div></div><div class="spec val" id="val-as_bvar_exn"><a href="#val-as_bvar_exn" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>as_bvar_exn : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"></div></div><div class="spec val" id="val-is_bvar_i"><a href="#val-is_bvar_i" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>is_bvar_i : int <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"><p><code class="code">is_bvar_i n t</code> is <code class="code">true</code> iff <code class="code">t = bvar i</code></p></div></div><h3>IO</h3><div class="spec val" id="val-print_hashconsing_ids"><a href="#val-print_hashconsing_ids" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>print_hashconsing_ids : bool Pervasives.ref</code></div><div class="doc"><p>if enabled, every term will be printed with its unique ID</p></div></div><div class="spec val" id="val-print_all_types"><a href="#val-print_all_types" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>print_all_types : bool Pervasives.ref</code></div><div class="doc"><p>if enabled, print all types</p></div></div><div class="spec val" id="val-show_type_arguments"><a href="#val-show_type_arguments" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>show_type_arguments : bool Pervasives.ref</code></div><div class="doc"><p>Parameter for printing/hiding type arguments in terms</p></div></div><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../Logtk/Interfaces/index.html#module-type-PRINT">Logtk.Interfaces.PRINT</a><span class="keyword"> with </span><span class="keyword">type </span><a href="../Logtk/Interfaces/module-type-PRINT/index.html#type-t">t</a> := <a href="index.html#type-t">t</a></code></span></summary><div class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>t</code><code></code><code></code></div><div class="doc"></div></div><div class="spec val" id="val-pp"><a href="#val-pp" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp : <a href="index.html#type-t">t</a> CCFormat.printer</code></div><div class="doc"></div></div><div class="spec val" id="val-to_string"><a href="#val-to_string" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>to_string : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"></div></div></details></div><div class="spec include"><div class="doc"></div><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../Logtk/Interfaces/index.html#module-type-PRINT_DE_BRUIJN">Logtk.Interfaces.PRINT_DE_BRUIJN</a><span class="keyword"> with </span><span class="keyword">type </span><a href="../Logtk/Interfaces/module-type-PRINT_DE_BRUIJN/index.html#type-t">t</a> := <a href="index.html#type-t">t</a><span class="keyword"> and </span><span class="keyword">type </span><a href="../Logtk/Interfaces/module-type-PRINT_DE_BRUIJN/index.html#type-term">term</a> := <a href="index.html#type-t">t</a></code></span></summary><div class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>t</code><code></code><code></code></div><div class="doc"></div></div><div class="spec type" id="type-term"><a href="#type-term" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>term</code><code></code><code></code></div><div class="doc"></div></div><div class="spec type" id="type-print_hook"><a href="#type-print_hook" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>print_hook</code><code><span class="keyword"> = </span>int <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-term">term</a> CCFormat.printer <span class="keyword">&#8209;&gt;</span> Format.formatter <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-term">term</a> <span class="keyword">&#8209;&gt;</span> bool</code><code></code></div><div class="doc"><p>User-provided hook that can be used to print terms (for composite cases)
before the default printing occurs. The int argument is the De Bruijn
depth in the term.
A hook takes as arguments the depth and the recursive printing function
that it can use to print subterms.
A hook should return <code class="code">true</code> if it fired, <code class="code">false</code> to fall back
on the default printing.</p></div></div><div class="spec val" id="val-pp_depth"><a href="#val-pp_depth" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp_depth : ?&#8288;hooks:<a href="index.html#type-print_hook">print_hook</a> list <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> CCFormat.printer</code></div><div class="doc"></div></div></details></div><div class="spec val" id="val-pp_var"><a href="#val-pp_var" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp_var : <a href="index.html#type-t">t</a> <a href="../Logtk/HVar/index.html#type-t">Logtk.HVar.t</a> CCFormat.printer</code></div><div class="doc"></div></div><div class="spec val" id="val-add_default_hook"><a href="#val-add_default_hook" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>add_default_hook : <a href="index.html#type-print_hook">print_hook</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>Add a print hook that will be used from now on</p></div></div><div class="spec val" id="val-default_hooks"><a href="#val-default_hooks" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>default_hooks : unit <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-print_hook">print_hook</a> list</code></div><div class="doc"></div></div><div class="spec val" id="val-debugf"><a href="#val-debugf" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>debugf : <a href="index.html#type-t">t</a> CCFormat.printer</code></div><div class="doc"></div></div><div class="spec val" id="val-pp_zf"><a href="#val-pp_zf" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp_zf : <a href="index.html#type-t">t</a> CCFormat.printer</code></div><div class="doc"></div></div><div class="spec val" id="val-pp_in"><a href="#val-pp_in" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp_in : <a href="../Logtk/Output_format/index.html#type-t">Logtk.Output_format.t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> CCFormat.printer</code></div><div class="doc"></div></div></body></html>