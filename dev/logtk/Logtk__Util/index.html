<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Logtk__Util (logtk.Logtk__Util)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../index.html">logtk</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Logtk__Util</span></h1></header><h2>Some helpers</h2><p>Various helpers for the provers.</p><p>It provides counters for statistics, basic profilers, helper functions,
debugging functions…</p><h3>Time facilities</h3><div class="spec val" id="val-total_time_s"><a href="#val-total_time_s" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>total_time_s : unit <span class="keyword">&#8209;&gt;</span> float</code></div><div class="doc"><p>time elapsed since start of program, in seconds</p></div></div><h3>Misc</h3><div class="spec module" id="module-Section"><a href="#module-Section" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Section/index.html">Section</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"><p>Debug section</p></div></div><div class="spec val" id="val-set_debug"><a href="#val-set_debug" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>set_debug : int <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>Set debug level of <code class="code">Section.root</code></p></div></div><div class="spec val" id="val-get_debug"><a href="#val-get_debug" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get_debug : unit <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"><p>Set debug level of <code class="code">Section.root</code></p><p>Current debug level for <code class="code">Section.root</code></p></div></div><div class="spec val" id="val-break_on_debug"><a href="#val-break_on_debug" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>break_on_debug : bool Pervasives.ref</code></div><div class="doc"><p>Shall we wait for user input after each debug message?</p></div></div><div class="spec val" id="val-debugf"><a href="#val-debugf" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>debugf : ?&#8288;section:<a href="Section/index.html#type-t">Section.t</a> <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span>, Format.formatter, unit, unit) Pervasives.format4 <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> unit) <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>Print a debug message, with the given section and verbosity level.
The message might be dropped if its level is too high.</p></div></div><div class="spec val" id="val-debug"><a href="#val-debug" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>debug : ?&#8288;section:<a href="Section/index.html#type-t">Section.t</a> <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>Cheap non-formatting version of <a href="index.html#val-debugf">debugf</a></p></div></div><div class="spec val" id="val-ksprintf_noc"><a href="#val-ksprintf_noc" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>ksprintf_noc : f:(string <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span>) <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'b</span>, Format.formatter, unit, <span class="type-var">'a</span>) Pervasives.format4 <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span></code></div><div class="doc"><p>Same as <code class="code">CCFormat.ksprintf</code>, but without colors</p></div></div><div class="spec val" id="val-err_spf"><a href="#val-err_spf" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>err_spf : (<span class="type-var">'b</span>, Format.formatter, unit, string) Pervasives.format4 <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span></code></div><div class="doc"><p>Version of sprintf that adds a colored &quot;error&quot; prefix</p></div></div><div class="spec val" id="val-warn"><a href="#val-warn" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>warn : string <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>Emit warning</p></div></div><div class="spec val" id="val-warnf"><a href="#val-warnf" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>warnf : (<span class="type-var">'a</span>, Format.formatter, unit, unit) Pervasives.format4 <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span></code></div><div class="doc"><p>Emit warning, with formatting</p></div></div><div class="spec exception" id="exception-Error"><a href="#exception-Error" class="anchor"></a><div class="def exception"><code><span class="keyword">exception </span></code><code><span class="exception">Error</span><span class="keyword"> of </span>string<span class="keyword"> * </span>string</code></div><div class="doc"><p>generalist error that do not really belong elsewhere.
<code class="code">Error (where,what)</code> means that error <code class="code">what</code> was raised from <code class="code">where</code>.</p></div></div><div class="spec val" id="val-error"><a href="#val-error" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>error : where:string <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span></code></div><div class="doc"><p><code class="code">error msg</code> raises <code class="code">Error msg</code></p><ul class="at-tag"><li><span class="at-tag raise">Raises</span> <span class="module-path">Error</span>: duh</li></ul></div></div><div class="spec val" id="val-errorf"><a href="#val-errorf" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>errorf : where:string <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'b</span>, Format.formatter, unit, <span class="type-var">'a</span>) Pervasives.format4 <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span></code></div><div class="doc"><p>Formatting version of <a href="index.html#val-error">error</a></p></div></div><div class="spec val" id="val-pp_pos"><a href="#val-pp_pos" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp_pos : Lexing.position <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"></div></div><div class="spec val" id="val-set_memory_limit"><a href="#val-set_memory_limit" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>set_memory_limit : int <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>Limit the amount of memory available to the process (in MB)</p></div></div><div class="spec val" id="val-set_time_limit"><a href="#val-set_time_limit" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>set_time_limit : int <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>Limit the CPU time available to the process (in seconds)</p></div></div><h3>OCaml Stack</h3><p>requires <code class="code">ocaml &gt;= 4.01</code></p><ul class="at-tag"><li><span class="at-tag since">Since</span>: 0.8</li></ul><div class="spec module" id="module-Exn"><a href="#module-Exn" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Exn/index.html">Exn</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><h3>profiling facilities</h3><div class="spec type" id="type-profiler"><a href="#type-profiler" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>profiler</code><code></code><code></code></div><div class="doc"></div></div><div class="spec val" id="val-enable_profiling"><a href="#val-enable_profiling" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>enable_profiling : bool Pervasives.ref</code></div><div class="doc"><p>Enable/disable profiling</p></div></div><div class="spec val" id="val-mk_profiler"><a href="#val-mk_profiler" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>mk_profiler : string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-profiler">profiler</a></code></div><div class="doc"><p>Enable/disable profiling</p><p>Create a named profiler</p></div></div><div class="spec val" id="val-enter_prof"><a href="#val-enter_prof" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>enter_prof : <a href="index.html#type-profiler">profiler</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>Create a named profiler</p><p>Enter the profiler</p></div></div><div class="spec val" id="val-exit_prof"><a href="#val-exit_prof" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>exit_prof : <a href="index.html#type-profiler">profiler</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>Enter the profiler</p><p>Exit the profiler</p></div></div><div class="spec val" id="val-with_prof"><a href="#val-with_prof" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>with_prof : <a href="index.html#type-profiler">profiler</a> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span>) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span></code></div><div class="doc"><p>Exit the profiler</p></div></div><h3>Runtime statistics</h3><div class="spec type" id="type-stat"><a href="#type-stat" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>stat</code><code></code><code></code></div><div class="doc"></div></div><div class="spec val" id="val-mk_stat"><a href="#val-mk_stat" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>mk_stat : string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-stat">stat</a></code></div><div class="doc"></div></div><div class="spec val" id="val-print_global_stats"><a href="#val-print_global_stats" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>print_global_stats : comment:string <span class="keyword">&#8209;&gt;</span> unit <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>comment prefix</p></div></div><div class="spec val" id="val-incr_stat"><a href="#val-incr_stat" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>incr_stat : <a href="index.html#type-stat">stat</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>comment prefix</p></div></div><div class="spec val" id="val-add_stat"><a href="#val-add_stat" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>add_stat : <a href="index.html#type-stat">stat</a> <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"></div></div><h3>Flags as integers</h3><div class="spec module" id="module-Flag"><a href="#module-Flag" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Flag/index.html">Flag</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><h3>Others</h3><div class="spec val" id="val-finally"><a href="#val-finally" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>finally : do_:(unit <span class="keyword">&#8209;&gt;</span> unit) <span class="keyword">&#8209;&gt;</span> (unit <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span>) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span></code></div><div class="doc"><p><code class="code">finally ~do_ f</code> calls <code class="code">f ()</code> and returns its result. If it raises, the
same exception is raised; in <b>any</b> case, <code class="code">do_ ()</code> is called after
<code class="code">f ()</code> terminates.</p></div></div><div class="spec val" id="val-pp_pair"><a href="#val-pp_pair" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp_pair : ?&#8288;sep:string <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> CCFormat.printer <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> CCFormat.printer <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span><span class="keyword"> * </span><span class="type-var">'b</span>) CCFormat.printer</code></div><div class="doc"></div></div><div class="spec val" id="val-pp_list"><a href="#val-pp_list" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp_list : ?&#8288;sep:string <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> CCFormat.printer <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> list CCFormat.printer</code></div><div class="doc"><p>Print a list without begin/end separators</p></div></div><div class="spec val" id="val-pp_seq"><a href="#val-pp_seq" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp_seq : ?&#8288;sep:string <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> CCFormat.printer <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> Sequence.t CCFormat.printer</code></div><div class="doc"></div></div><div class="spec val" id="val-pp_list0"><a href="#val-pp_list0" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp_list0 : ?&#8288;sep:string <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> CCFormat.printer <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> list CCFormat.printer</code></div><div class="doc"><p>Print a list with a whitespace in front if it's non empty, or
does nothing if the list is empty
Default separator is &quot; &quot;</p></div></div><div class="spec val" id="val-tstp_needs_escaping"><a href="#val-tstp_needs_escaping" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>tstp_needs_escaping : string <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"><p>Is this name a proper TSTP identifier, or does it need ' ' around it?</p></div></div><div class="spec val" id="val-pp_str_tstp"><a href="#val-pp_str_tstp" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp_str_tstp : string CCFormat.printer</code></div><div class="doc"><p>possibly escaping</p></div></div><div class="spec val" id="val-pp_var_tstp"><a href="#val-pp_var_tstp" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp_var_tstp : string CCFormat.printer</code></div><div class="doc"><p>possibly escaping</p></div></div><div class="spec val" id="val-ord_option"><a href="#val-ord_option" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>ord_option : <span class="type-var">'a</span> CCOrd.t <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> option CCOrd.t</code></div><div class="doc"></div></div><div class="spec val" id="val-take_drop_while"><a href="#val-take_drop_while" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>take_drop_while : (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> bool) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> list <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> list<span class="keyword"> * </span><span class="type-var">'a</span> list</code></div><div class="doc"></div></div><div class="spec val" id="val-map_product"><a href="#val-map_product" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>map_product : f:(<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> list list) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> list <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> list list</code></div><div class="doc"></div></div><div class="spec val" id="val-seq_map_l"><a href="#val-seq_map_l" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>seq_map_l : f:(<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> list) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> list <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> list Sequence.t</code></div><div class="doc"></div></div><div class="spec val" id="val-invalid_argf"><a href="#val-invalid_argf" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>invalid_argf : (<span class="type-var">'a</span>, Format.formatter, unit, <span class="type-var">'b</span>) Pervasives.format4 <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span></code></div><div class="doc"></div></div><div class="spec val" id="val-failwithf"><a href="#val-failwithf" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>failwithf : (<span class="type-var">'a</span>, Format.formatter, unit, <span class="type-var">'b</span>) Pervasives.format4 <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span></code></div><div class="doc"></div></div><div class="spec module" id="module-Int_map"><a href="#module-Int_map" class="anchor"></a><div class="def module"><code><span class="keyword">module </span>Int_map : CCMap.S<span class="keyword"> with </span><span class="keyword">type </span><a href="index.html#module-Int_map">Int_map</a>.key<span class="keyword"> = </span>int</code></div><div class="doc"></div></div><div class="spec module" id="module-Int_set"><a href="#module-Int_set" class="anchor"></a><div class="def module"><code><span class="keyword">module </span>Int_set : CCSet.S<span class="keyword"> with </span><span class="keyword">type </span><a href="index.html#module-Int_set">Int_set</a>.elt<span class="keyword"> = </span>int</code></div><div class="doc"></div></div><div class="spec val" id="val-escape_dot"><a href="#val-escape_dot" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>escape_dot : string <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p>String escaping for graphviz</p></div></div><h3>File utils</h3><div class="spec type" id="type-or_error"><a href="#type-or_error" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a or_error</code><code><span class="keyword"> = </span>(<span class="type-var">'a</span>, string) CCResult.t</code><code></code></div><div class="doc"></div></div><div class="spec val" id="val-popen"><a href="#val-popen" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>popen : cmd:string <span class="keyword">&#8209;&gt;</span> input:string <span class="keyword">&#8209;&gt;</span> string <a href="index.html#type-or_error">or_error</a></code></div><div class="doc"><p>Run the given command <code class="code">cmd</code> with the given <code class="code">input</code>, wait for it
to terminate, and return its stdout.</p></div></div></body></html>