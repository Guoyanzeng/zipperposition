<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Logtk__Util (logtk.Logtk__Util)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">logtk</a> &#x00BB; Logtk__Util</nav><h1>Module <code>Logtk__Util</code></h1><h2 id="some-helpers"><a href="#some-helpers" class="anchor"></a>Some helpers</h2><nav class="toc"><ul><li><a href="#time-facilities">Time facilities</a></li><li><a href="#misc">Misc</a></li><li><a href="#ocaml-stack">OCaml Stack</a></li><li><a href="#runtime-statistics">Runtime statistics</a></li><li><a href="#flags-as-integers">Flags as integers</a></li><li><a href="#others">Others</a></li><li><a href="#file-utils">File utils</a></li></ul></nav></header><aside><p>Various helpers for the provers.</p><p>It provides counters for statistics, basic profilers, helper functions, debugging functions…</p></aside><section><header><h3 id="time-facilities"><a href="#time-facilities" class="anchor"></a>Time facilities</h3></header><dl><dt class="spec value" id="val-total_time_s"><a href="#val-total_time_s" class="anchor"></a><code><span class="keyword">val</span> total_time_s : unit <span>&#45;&gt;</span> float</code></dt><dd><p>time elapsed since start of program, in seconds</p></dd></dl><dl><dt class="spec value" id="val-get_time_mon_"><a href="#val-get_time_mon_" class="anchor"></a><code><span class="keyword">val</span> get_time_mon_ : unit <span>&#45;&gt;</span> float</code></dt><dd><p>A &quot;monotonic&quot; clock (TODO! right now, just unix clock)</p></dd></dl></section><section><header><h3 id="misc"><a href="#misc" class="anchor"></a>Misc</h3></header><dl><dt class="spec module" id="module-Section"><a href="#module-Section" class="anchor"></a><code><span class="keyword">module</span> <a href="Section/index.html">Section</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Debug section</p></dd></dl><dl><dt class="spec value" id="val-set_debug"><a href="#val-set_debug" class="anchor"></a><code><span class="keyword">val</span> set_debug : int <span>&#45;&gt;</span> unit</code></dt><dd><p>Set debug level of <code>Section.root</code></p></dd></dl><dl><dt class="spec value" id="val-get_debug"><a href="#val-get_debug" class="anchor"></a><code><span class="keyword">val</span> get_debug : unit <span>&#45;&gt;</span> int</code></dt><dd><p>Current debug level for <code>Section.root</code></p></dd></dl><dl><dt class="spec value" id="val-break_on_debug"><a href="#val-break_on_debug" class="anchor"></a><code><span class="keyword">val</span> break_on_debug : <span>bool Stdlib.ref</span></code></dt><dd><p>Shall we wait for user input after each debug message?</p></dd></dl><dl><dt class="spec value" id="val-debugf"><a href="#val-debugf" class="anchor"></a><code><span class="keyword">val</span> debugf : <span>?&#8288;section:<a href="Section/index.html#type-t">Section.t</a></span> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, Stdlib.Format.formatter, unit, unit)</span> Stdlib.format4</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Print a debug message, with the given section and verbosity level. The message might be dropped if its level is too high.</p></dd></dl><dl><dt class="spec value" id="val-debug"><a href="#val-debug" class="anchor"></a><code><span class="keyword">val</span> debug : <span>?&#8288;section:<a href="Section/index.html#type-t">Section.t</a></span> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></dt><dd><p>Cheap non-formatting version of <a href="index.html#val-debugf"><code>debugf</code></a></p></dd></dl><dl><dt class="spec value" id="val-ksprintf_noc"><a href="#val-ksprintf_noc" class="anchor"></a><code><span class="keyword">val</span> ksprintf_noc : <span>f:<span>(string <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'b</span>, Stdlib.Format.formatter, unit, <span class="type-var">'a</span>)</span> Stdlib.format4</span> <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dd><p>Same as <code>CCFormat.ksprintf</code>, but without colors</p></dd></dl><dl><dt class="spec value" id="val-err_spf"><a href="#val-err_spf" class="anchor"></a><code><span class="keyword">val</span> err_spf : <span><span>(<span class="type-var">'b</span>, Stdlib.Format.formatter, unit, string)</span> Stdlib.format4</span> <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dd><p>Version of <code>sprintf</code> that adds a colored &quot;error&quot; prefix</p></dd></dl><dl><dt class="spec value" id="val-warn"><a href="#val-warn" class="anchor"></a><code><span class="keyword">val</span> warn : string <span>&#45;&gt;</span> unit</code></dt><dd><p>Emit warning</p></dd></dl><dl><dt class="spec value" id="val-warnf"><a href="#val-warnf" class="anchor"></a><code><span class="keyword">val</span> warnf : <span><span>(<span class="type-var">'a</span>, Stdlib.Format.formatter, unit, unit)</span> Stdlib.format4</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Emit warning, with formatting</p></dd></dl><dl><dt class="spec exception" id="exception-Error"><a href="#exception-Error" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Error</span> <span class="keyword">of</span> string * string</code></dt><dd><p>generalist error that do not really belong elsewhere. <code>Error (where,what)</code> means that error <code>what</code> was raised from <code>where</code>.</p></dd></dl><dl><dt class="spec value" id="val-error"><a href="#val-error" class="anchor"></a><code><span class="keyword">val</span> error : <span>where:string</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>error msg</code> raises <code>Error msg</code></p><dl><dt>raises Error</dt><dd><p>duh</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-errorf"><a href="#val-errorf" class="anchor"></a><code><span class="keyword">val</span> errorf : <span>where:string</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'b</span>, Stdlib.Format.formatter, unit, <span class="type-var">'a</span>)</span> Stdlib.format4</span> <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dd><p>Formatting version of <a href="index.html#val-error"><code>error</code></a></p></dd></dl><dl><dt class="spec value" id="val-pp_pos"><a href="#val-pp_pos" class="anchor"></a><code><span class="keyword">val</span> pp_pos : Stdlib.Lexing.position <span>&#45;&gt;</span> string</code></dt><dt class="spec value" id="val-set_memory_limit"><a href="#val-set_memory_limit" class="anchor"></a><code><span class="keyword">val</span> set_memory_limit : int <span>&#45;&gt;</span> unit</code></dt><dd><p>Limit the amount of memory available to the process (in MB)</p></dd></dl><dl><dt class="spec value" id="val-set_time_limit"><a href="#val-set_time_limit" class="anchor"></a><code><span class="keyword">val</span> set_time_limit : int <span>&#45;&gt;</span> unit</code></dt><dd><p>Limit the CPU time available to the process (in seconds)</p></dd></dl></section><section><header><h3 id="ocaml-stack"><a href="#ocaml-stack" class="anchor"></a>OCaml Stack</h3><p>requires <code>ocaml &gt;= 4.01</code></p><dl><dt>since</dt><dd>0.8</dd></dl></header><div class="spec module" id="module-Exn"><a href="#module-Exn" class="anchor"></a><code><span class="keyword">module</span> <a href="Exn/index.html">Exn</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section><section><header><h3 id="runtime-statistics"><a href="#runtime-statistics" class="anchor"></a>Runtime statistics</h3></header><dl><dt class="spec type" id="type-stat"><a href="#type-stat" class="anchor"></a><code><span class="keyword">type</span> stat</code></dt></dl><dl><dt class="spec value" id="val-mk_stat"><a href="#val-mk_stat" class="anchor"></a><code><span class="keyword">val</span> mk_stat : string <span>&#45;&gt;</span> <a href="index.html#type-stat">stat</a></code></dt><dt class="spec value" id="val-print_global_stats"><a href="#val-print_global_stats" class="anchor"></a><code><span class="keyword">val</span> print_global_stats : <span>comment:string</span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> unit</code></dt><dd><p>comment prefix</p></dd></dl><dl><dt class="spec value" id="val-incr_stat"><a href="#val-incr_stat" class="anchor"></a><code><span class="keyword">val</span> incr_stat : <a href="index.html#type-stat">stat</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-add_stat"><a href="#val-add_stat" class="anchor"></a><code><span class="keyword">val</span> add_stat : <a href="index.html#type-stat">stat</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-pp_stat"><a href="#val-pp_stat" class="anchor"></a><code><span class="keyword">val</span> pp_stat : Stdlib.Format.formatter <span>&#45;&gt;</span> <a href="index.html#type-stat">stat</a> <span>&#45;&gt;</span> unit</code></dt></dl></section><section><header><h3 id="flags-as-integers"><a href="#flags-as-integers" class="anchor"></a>Flags as integers</h3></header><div class="spec module" id="module-Flag"><a href="#module-Flag" class="anchor"></a><code><span class="keyword">module</span> <a href="Flag/index.html">Flag</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section><section><header><h3 id="others"><a href="#others" class="anchor"></a>Others</h3></header><dl><dt class="spec value" id="val-finally"><a href="#val-finally" class="anchor"></a><code><span class="keyword">val</span> finally : <span>do_:<span>(unit <span>&#45;&gt;</span> unit)</span></span> <span>&#45;&gt;</span> <span>(unit <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>finally ~do_ f</code> calls <code>f ()</code> and returns its result. If it raises, the same exception is raised; in <b>any</b> case, <code>do_ ()</code> is called after <code>f ()</code> terminates.</p></dd></dl><dl><dt class="spec value" id="val-pp_pair"><a href="#val-pp_pair" class="anchor"></a><code><span class="keyword">val</span> pp_pair : <span>?&#8288;sep:string</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> CCFormat.printer</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> CCFormat.printer</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> CCFormat.printer</span></code></dt><dt class="spec value" id="val-pp_list"><a href="#val-pp_list" class="anchor"></a><code><span class="keyword">val</span> pp_list : <span>?&#8288;sep:string</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> CCFormat.printer</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> list</span> CCFormat.printer</span></code></dt><dd><p>Print a list without begin/end separators</p></dd></dl><dl><dt class="spec value" id="val-pp_seq"><a href="#val-pp_seq" class="anchor"></a><code><span class="keyword">val</span> pp_seq : <span>?&#8288;sep:string</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> CCFormat.printer</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> Stdlib.Seq.t</span> CCFormat.printer</span></code></dt><dt class="spec value" id="val-pp_iter"><a href="#val-pp_iter" class="anchor"></a><code><span class="keyword">val</span> pp_iter : <span>?&#8288;sep:string</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> CCFormat.printer</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> Iter.t</span> CCFormat.printer</span></code></dt><dt class="spec value" id="val-pp_list0"><a href="#val-pp_list0" class="anchor"></a><code><span class="keyword">val</span> pp_list0 : <span>?&#8288;sep:string</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> CCFormat.printer</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> list</span> CCFormat.printer</span></code></dt><dd><p>Print a list with a whitespace in front if it's non empty, or does nothing if the list is empty Default separator is &quot; &quot;</p></dd></dl><dl><dt class="spec value" id="val-tstp_needs_escaping"><a href="#val-tstp_needs_escaping" class="anchor"></a><code><span class="keyword">val</span> tstp_needs_escaping : string <span>&#45;&gt;</span> bool</code></dt><dd><p>Is this name a proper TSTP identifier, or does it need ' ' around it?</p></dd></dl><dl><dt class="spec value" id="val-pp_str_tstp"><a href="#val-pp_str_tstp" class="anchor"></a><code><span class="keyword">val</span> pp_str_tstp : <span>string CCFormat.printer</span></code></dt><dd><p>possibly escaping</p></dd></dl><dl><dt class="spec value" id="val-pp_var_tstp"><a href="#val-pp_var_tstp" class="anchor"></a><code><span class="keyword">val</span> pp_var_tstp : <span>string CCFormat.printer</span></code></dt><dt class="spec value" id="val-ord_option"><a href="#val-ord_option" class="anchor"></a><code><span class="keyword">val</span> ord_option : <span><span class="type-var">'a</span> CCOrd.t</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> option</span> CCOrd.t</span></code></dt><dt class="spec value" id="val-take_drop_while"><a href="#val-take_drop_while" class="anchor"></a><code><span class="keyword">val</span> take_drop_while : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> bool)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> list</span> * <span><span class="type-var">'a</span> list</span></code></dt><dt class="spec value" id="val-map_product"><a href="#val-map_product" class="anchor"></a><code><span class="keyword">val</span> map_product : <span>f:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'b</span> list</span> list</span>)</span></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'b</span> list</span> list</span></code></dt><dt class="spec value" id="val-seq_map_l"><a href="#val-seq_map_l" class="anchor"></a><code><span class="keyword">val</span> seq_map_l : <span>f:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> list</span>)</span></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'b</span> list</span> Iter.t</span></code></dt><dt class="spec value" id="val-seq_zipi"><a href="#val-seq_zipi" class="anchor"></a><code><span class="keyword">val</span> seq_zipi : <span><span class="type-var">'a</span> Iter.t</span> <span>&#45;&gt;</span> <span><span>(int * <span class="type-var">'a</span>)</span> Iter.t</span></code></dt><dt class="spec value" id="val-invalid_argf"><a href="#val-invalid_argf" class="anchor"></a><code><span class="keyword">val</span> invalid_argf : <span><span>(<span class="type-var">'a</span>, Stdlib.Format.formatter, unit, <span class="type-var">'b</span>)</span> Stdlib.format4</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-failwithf"><a href="#val-failwithf" class="anchor"></a><code><span class="keyword">val</span> failwithf : <span><span>(<span class="type-var">'a</span>, Stdlib.Format.formatter, unit, <span class="type-var">'b</span>)</span> Stdlib.format4</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt></dl><div class="spec module" id="module-Int_map"><a href="#module-Int_map" class="anchor"></a><code><span class="keyword">module</span> Int_map : CCMap.S <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#module-Int_map">Int_map</a>.key = int</code></div><div class="spec module" id="module-Int_set"><a href="#module-Int_set" class="anchor"></a><code><span class="keyword">module</span> Int_set : CCSet.S <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#module-Int_set">Int_set</a>.elt = int</code></div><dl><dt class="spec value" id="val-escape_dot"><a href="#val-escape_dot" class="anchor"></a><code><span class="keyword">val</span> escape_dot : string <span>&#45;&gt;</span> string</code></dt><dd><p>String escaping for graphviz</p></dd></dl></section><section><header><h3 id="file-utils"><a href="#file-utils" class="anchor"></a>File utils</h3></header><dl><dt class="spec type" id="type-or_error"><a href="#type-or_error" class="anchor"></a><code><span class="keyword">type</span> <span>'a or_error</span></code><code> = <span><span>(<span class="type-var">'a</span>, string)</span> CCResult.t</span></code></dt></dl><dl><dt class="spec value" id="val-popen"><a href="#val-popen" class="anchor"></a><code><span class="keyword">val</span> popen : <span>cmd:string</span> <span>&#45;&gt;</span> <span>input:string</span> <span>&#45;&gt;</span> <span>string <a href="index.html#type-or_error">or_error</a></span></code></dt><dd><p>Run the given command <code>cmd</code> with the given <code>input</code>, wait for it to terminate, and return its stdout.</p></dd></dl></section></div></body></html>